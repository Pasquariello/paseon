{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nvar _jsxFileName = \"/Users/taylorpasquariello/learning_resources/paseon/paseon/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react'; // import fetch from 'isomorphic-unfetch'\n\nimport Link from 'next/link';\nimport Layout from '../components/MyLayout';\nimport { login } from '../utils/auth';\nimport { useDispatch } from 'react-redux';\nimport { withRedux } from '../lib/redux'; // import { login } from '../redux/actions/auth'\n\nimport Router from 'next/router';\nimport getUrl from '../utils/getUrl';\n\nfunction Login() {\n  var dispatch = useDispatch();\n\n  var _useState = useState({\n    username: '',\n    password: '',\n    error: ''\n  }),\n      userData = _useState[0],\n      setUserData = _useState[1];\n\n  function handleSubmit(event) {\n    var username, url, response, _response;\n\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            setUserData(_Object$assign({}, userData, {\n              error: ''\n            }));\n            username = userData.username; //let url = 'https://paseonforms.com/login/auth'\n\n            url = \"\".concat(getUrl, \"/login/auth\");\n            _context.prev = 4;\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(fetch(url, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: _JSON$stringify(userData)\n            }).then(function (response) {\n              if (response.status !== 200) {\n                console.log('Login failed.');\n                var error = new Error(response.statusText);\n                error.response = response;\n                throw error;\n              }\n\n              response.json().then(function (data) {\n                dispatch({\n                  type: 'LOGIN_SUCCESS',\n                  payload: data\n                });\n                Router.push('/dashboard');\n              });\n            }));\n\n          case 7:\n            response = _context.sent;\n            _context.next = 15;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](4);\n            console.error('You have an error in your code or there are Network issues.', _context.t0);\n            _response = _context.t0.response;\n            setUserData(_Object$assign({}, userData, {\n              error: _response ? _response.statusText : _context.t0.message\n            }));\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[4, 10]]);\n  }\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      overflow: 'auto'\n    },\n    className: \"jsx-1828860322\" + \" \" + 'login',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"username\",\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Username / Email\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    value: userData.username,\n    onChange: function onChange(event) {\n      return setUserData(_Object$assign({}, userData, {\n        username: event.target.value\n      }));\n    },\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), __jsx(\"label\", {\n    htmlFor: \"username\",\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Password\"), __jsx(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    value: userData.password,\n    onChange: function onChange(event) {\n      return setUserData(_Object$assign({}, userData, {\n        password: event.target.value\n      }));\n    },\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Login\"), userData.error && __jsx(\"p\", {\n    className: \"jsx-1828860322\" + \" \" + 'error',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"Error: \", userData.error)), __jsx(\"div\", {\n    style: {\n      \"float\": 'left'\n    },\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Register\"))), __jsx(\"div\", {\n    style: {\n      \"float\": 'right'\n    },\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/reset/forgotPassword\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"Forgot Password\")))), __jsx(_JSXStyle, {\n    id: \"1828860322\",\n    __self: this\n  }, \".login.jsx-1828860322{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-1828860322{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-1828860322{font-weight:600;}input.jsx-1828860322{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-1828860322{margin:0.5rem 0 0;color:brown;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YXlsb3JwYXNxdWFyaWVsbG8vbGVhcm5pbmdfcmVzb3VyY2VzL3Bhc2Vvbi9wYXNlb24vcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcUlrQixBQUcyQixBQU9ILEFBSUcsQUFHSixBQU1NLFlBTEcsSUFkUCxBQVdoQixFQVNjLFlBbkJDLEFBb0JmLEdBTndCLFVBYkEsWUFjSixVQWJBLFFBY3BCLENBVm1CLFNBSG5CLHNEQUlBIiwiZmlsZSI6Ii9Vc2Vycy90YXlsb3JwYXNxdWFyaWVsbG8vbGVhcm5pbmdfcmVzb3VyY2VzL3Bhc2Vvbi9wYXNlb24vcGFnZXMvbG9naW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbi8vIGltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTXlMYXlvdXQnXG4gaW1wb3J0IHsgbG9naW4gfSBmcm9tICcuLi91dGlscy9hdXRoJ1xuXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJ3JlYWN0LXJlZHV4J1xuaW1wb3J0IHsgd2l0aFJlZHV4IH0gZnJvbSAnLi4vbGliL3JlZHV4J1xuLy8gaW1wb3J0IHsgbG9naW4gfSBmcm9tICcuLi9yZWR1eC9hY3Rpb25zL2F1dGgnXG5pbXBvcnQgUm91dGVyIGZyb20gJ25leHQvcm91dGVyJ1xuXG5cbmltcG9ydCBnZXRVcmwgZnJvbSAnLi4vdXRpbHMvZ2V0VXJsJztcblxuXG5cblxuXG5mdW5jdGlvbiBMb2dpbiAoKSB7XG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKVxuXG5cbiAgY29uc3QgW3VzZXJEYXRhLCBzZXRVc2VyRGF0YV0gPSB1c2VTdGF0ZSh7IHVzZXJuYW1lOiAnJywgcGFzc3dvcmQ6ICcnLCBlcnJvcjogJycgfSlcblxuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICBcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc2V0VXNlckRhdGEoT2JqZWN0LmFzc2lnbih7fSwgdXNlckRhdGEsIHsgZXJyb3I6ICcnIH0pKVxuICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlckRhdGEudXNlcm5hbWVcblxuICAgIC8vbGV0IHVybCA9ICdodHRwczovL3Bhc2VvbmZvcm1zLmNvbS9sb2dpbi9hdXRoJ1xuICAgICAgICAgbGV0IHVybCA9IGAke2dldFVybH0vbG9naW4vYXV0aGAgICAgXG4gIFxuXG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlckRhdGEpXG4gICAgICAgIFxuICAgICAgfSkudGhlbihcbiAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2dpbiBmYWlsZWQuJylcbiAgICAgICAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpXG4gICAgICAgICAgICAgIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbihkYXRhKXtcblxuICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICB0eXBlOiAnTE9HSU5fU1VDQ0VTUycsXG4gICAgICAgICAgICAgIHBheWxvYWQ6IGRhdGFcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIFJvdXRlci5wdXNoKCcvZGFzaGJvYXJkJylcblxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ1lvdSBoYXZlIGFuIGVycm9yIGluIHlvdXIgY29kZSBvciB0aGVyZSBhcmUgTmV0d29yayBpc3N1ZXMuJyxcbiAgICAgICAgZXJyb3JcbiAgICAgIClcblxuICAgICAgY29uc3QgeyByZXNwb25zZSB9ID0gZXJyb3JcbiAgICAgIHNldFVzZXJEYXRhKFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB1c2VyRGF0YSwge1xuICAgICAgICAgIGVycm9yOiByZXNwb25zZSA/IHJlc3BvbnNlLnN0YXR1c1RleHQgOiBlcnJvci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9naW4nIHN0eWxlPXt7b3ZlcmZsb3c6ICdhdXRvJ319PlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0ndXNlcm5hbWUnPlVzZXJuYW1lIC8gRW1haWw8L2xhYmVsPlxuXG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgaWQ9J3VzZXJuYW1lJ1xuICAgICAgICAgICAgbmFtZT0ndXNlcm5hbWUnXG4gICAgICAgICAgICB2YWx1ZT17dXNlckRhdGEudXNlcm5hbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17ZXZlbnQgPT5cbiAgICAgICAgICAgICAgc2V0VXNlckRhdGEoXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdXNlckRhdGEsIHsgdXNlcm5hbWU6IGV2ZW50LnRhcmdldC52YWx1ZSB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cblxuPGxhYmVsIGh0bWxGb3I9J3VzZXJuYW1lJz5QYXNzd29yZDwvbGFiZWw+XG5cbjxpbnB1dFxuICB0eXBlPSdwYXNzd29yZCdcbiAgaWQ9J3Bhc3N3b3JkJ1xuICBuYW1lPSdwYXNzd29yZCdcbiAgdmFsdWU9e3VzZXJEYXRhLnBhc3N3b3JkfVxuICBvbkNoYW5nZT17ZXZlbnQgPT5cbiAgICBzZXRVc2VyRGF0YShcbiAgICAgIE9iamVjdC5hc3NpZ24oe30sIHVzZXJEYXRhLCB7IHBhc3N3b3JkOiBldmVudC50YXJnZXQudmFsdWUgfSlcbiAgICApXG4gIH1cbi8+XG5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCc+TG9naW48L2J1dHRvbj5cblxuICAgICAgICAgIHt1c2VyRGF0YS5lcnJvciAmJiA8cCBjbGFzc05hbWU9J2Vycm9yJz5FcnJvcjoge3VzZXJEYXRhLmVycm9yfTwvcD59XG4gICAgICAgIDwvZm9ybT5cbiAgICAgICAgICBcbiAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiAnbGVmdCd9fT5cbiAgICAgICAgPExpbmsgaHJlZj1cIi9yZWdpc3RlclwiPlxuICAgICAgICAgIDxhPlJlZ2lzdGVyPC9hPlxuICAgICAgICA8L0xpbms+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDogJ3JpZ2h0J319PlxuICAgICAgICA8TGluayBocmVmPVwiL3Jlc2V0L2ZvcmdvdFBhc3N3b3JkXCI+XG4gICAgICAgICAgPGE+Rm9yZ290IFBhc3N3b3JkPC9hPlxuICAgICAgICA8L0xpbms+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7LyogPGRpdiBzdHlsZT17e2NsZWFyOiAnYm90aCd9fT48L2Rpdj4gKi99XG5cblxuICAgICAgPC9kaXY+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5sb2dpbiB7XG4gICAgICAgICAgbWF4LXdpZHRoOiAzNDBweDtcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAxcmVtO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB9XG4gICAgICAgIGZvcm0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1mbG93OiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgbGFiZWwge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQge1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBtYXJnaW46IDAuM3JlbSAwIDFyZW07XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLmVycm9yIHtcbiAgICAgICAgICBtYXJnaW46IDAuNXJlbSAwIDA7XG4gICAgICAgICAgY29sb3I6IGJyb3duO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9MYXlvdXQ+XG4gIClcbn1cblxuTG9naW4uZ2V0SW5pdGlhbFByb3BzID0gKHsgcmVkdXhTdG9yZSB9KSA9PiB7XG4gIGNvbnNvbGUubG9nKCdyZWR1eFN0b3JlJyxyZWR1eFN0b3JlKVxuICAvLyBUaWNrIHRoZSB0aW1lIG9uY2UsIHNvIHdlJ2xsIGhhdmUgYVxuICAvLyB2YWxpZCB0aW1lIGJlZm9yZSBmaXJzdCByZW5kZXJcbiAgLy8gY29uc3QgeyBkaXNwYXRjaCB9ID0gcmVkdXhTdG9yZVxuICAvLyBkaXNwYXRjaCh7XG4gIC8vICAgdHlwZTogJ0xPR0lOJyxcbiAgLy8gICBjdXJyZW50X3VzZXI6IDJcbiAgLy8gICAvL2xpZ2h0OiB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyxcbiAgLy8gICAvL2xhc3RVcGRhdGU6IERhdGUubm93KCksXG4gIC8vIH0pXG5cbiAgcmV0dXJuIHt9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSZWR1eChMb2dpbilcblxuLy8gZXhwb3J0IGRlZmF1bHQgTG9naW5cblxuXG5cbi8vIGZ1bmN0aW9uIFByb2ZpbGVQYWdlKHsgcHJvZmlsZSB9KSB7XG4vLyAgIHJldHVybiAoXG4vLyAgICAgPD5cbi8vICAgICAgIDxkaXY+XG4vLyAgICAgICAgIDxpbWcgc3JjPXtwcm9maWxlLmF2YXRhcn0gLz5cbi8vICAgICAgICAgPGgxPntwcm9maWxlLm5hbWV9PC9oMT5cbi8vICAgICAgICAgPHA+e3Byb2ZpbGUuYWRkcmVzc308L3A+XG4vLyAgICAgICAgIDxwPntwcm9maWxlLmVtYWlsfTwvcD5cbi8vICAgICAgICAgPExpbmsgaHJlZj1cIi9cIj5cbi8vICAgICAgICAgICA8YT7ihpAgQmFjayB0byBwcm9maWxlczwvYT5cbi8vICAgICAgICAgPC9MaW5rPlxuLy8gICAgICAgPC9kaXY+XG4vLyAgICAgPC8+XG4vLyAgIClcbi8vIH1cblxuLy8gZXhwb3J0IGRlZmF1bHQgUHJvZmlsZVBhZ2UiXX0= */\\n/*@ sourceURL=/Users/taylorpasquariello/learning_resources/paseon/paseon/pages/login.js */\"));\n}\n\nLogin.getInitialProps = function (_ref) {\n  var reduxStore = _ref.reduxStore;\n  console.log('reduxStore', reduxStore); // Tick the time once, so we'll have a\n  // valid time before first render\n  // const { dispatch } = reduxStore\n  // dispatch({\n  //   type: 'LOGIN',\n  //   current_user: 2\n  //   //light: typeof window === 'object',\n  //   //lastUpdate: Date.now(),\n  // })\n\n  return {};\n};\n\nexport default withRedux(Login); // export default Login\n// function ProfilePage({ profile }) {\n//   return (\n//     <>\n//       <div>\n//         <img src={profile.avatar} />\n//         <h1>{profile.name}</h1>\n//         <p>{profile.address}</p>\n//         <p>{profile.email}</p>\n//         <Link href=\"/\">\n//           <a>← Back to profiles</a>\n//         </Link>\n//       </div>\n//     </>\n//   )\n// }\n// export default ProfilePage","map":{"version":3,"sources":["/Users/taylorpasquariello/learning_resources/paseon/paseon/pages/login.js"],"names":["React","useState","Link","Layout","login","useDispatch","withRedux","Router","getUrl","Login","dispatch","username","password","error","userData","setUserData","handleSubmit","event","preventDefault","url","fetch","method","headers","body","then","response","status","console","log","Error","statusText","json","data","type","payload","push","message","overflow","target","value","getInitialProps","reduxStore"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\n// import fetch from 'isomorphic-unfetch'\nimport Link from 'next/link'\nimport Layout from '../components/MyLayout'\n import { login } from '../utils/auth'\n\nimport { useDispatch } from 'react-redux'\nimport { withRedux } from '../lib/redux'\n// import { login } from '../redux/actions/auth'\nimport Router from 'next/router'\n\n\nimport getUrl from '../utils/getUrl';\n\n\n\n\n\nfunction Login () {\n  const dispatch = useDispatch()\n\n\n  const [userData, setUserData] = useState({ username: '', password: '', error: '' })\n\n\n  async function handleSubmit (event) {\n    \n    event.preventDefault()\n    setUserData(Object.assign({}, userData, { error: '' }))\n    const username = userData.username\n\n    //let url = 'https://paseonforms.com/login/auth'\n         let url = `${getUrl}/login/auth`    \n  \n\n    try {\n\n      const response = await fetch(url, {\n        \n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(userData)\n        \n      }).then(\n        function(response) {\n          if (response.status !== 200) {\n            console.log('Login failed.')\n              let error = new Error(response.statusText)\n              error.response = response\n              throw error\n          }\n\n          response.json().then(function(data){\n\n            dispatch({\n              type: 'LOGIN_SUCCESS',\n              payload: data\n            });\n\n\n            Router.push('/dashboard')\n\n          })\n        }\n      )\n    } catch (error) {\n      console.error(\n        'You have an error in your code or there are Network issues.',\n        error\n      )\n\n      const { response } = error\n      setUserData(\n        Object.assign({}, userData, {\n          error: response ? response.statusText : error.message\n        })\n      )\n    }\n  }\n\n  return (\n    <Layout>\n      \n      <div className='login' style={{overflow: 'auto'}}>\n        <form onSubmit={handleSubmit}>\n          <label htmlFor='username'>Username / Email</label>\n\n          <input\n            type='text'\n            id='username'\n            name='username'\n            value={userData.username}\n            onChange={event =>\n              setUserData(\n                Object.assign({}, userData, { username: event.target.value })\n              )\n            }\n          />\n\n<label htmlFor='username'>Password</label>\n\n<input\n  type='password'\n  id='password'\n  name='password'\n  value={userData.password}\n  onChange={event =>\n    setUserData(\n      Object.assign({}, userData, { password: event.target.value })\n    )\n  }\n/>\n\n          <button type='submit'>Login</button>\n\n          {userData.error && <p className='error'>Error: {userData.error}</p>}\n        </form>\n          \n        <div style={{float: 'left'}}>\n        <Link href=\"/register\">\n          <a>Register</a>\n        </Link>\n        </div>\n\n        <div style={{float: 'right'}}>\n        <Link href=\"/reset/forgotPassword\">\n          <a>Forgot Password</a>\n        </Link>\n        </div>\n        {/* <div style={{clear: 'both'}}></div> */}\n\n\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 340px;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        form {\n          display: flex;\n          flex-flow: column;\n        }\n        label {\n          font-weight: 600;\n        }\n        input {\n          padding: 8px;\n          margin: 0.3rem 0 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        .error {\n          margin: 0.5rem 0 0;\n          color: brown;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\nLogin.getInitialProps = ({ reduxStore }) => {\n  console.log('reduxStore',reduxStore)\n  // Tick the time once, so we'll have a\n  // valid time before first render\n  // const { dispatch } = reduxStore\n  // dispatch({\n  //   type: 'LOGIN',\n  //   current_user: 2\n  //   //light: typeof window === 'object',\n  //   //lastUpdate: Date.now(),\n  // })\n\n  return {}\n}\n\nexport default withRedux(Login)\n\n// export default Login\n\n\n\n// function ProfilePage({ profile }) {\n//   return (\n//     <>\n//       <div>\n//         <img src={profile.avatar} />\n//         <h1>{profile.name}</h1>\n//         <p>{profile.address}</p>\n//         <p>{profile.email}</p>\n//         <Link href=\"/\">\n//           <a>← Back to profiles</a>\n//         </Link>\n//       </div>\n//     </>\n//   )\n// }\n\n// export default ProfilePage"]},"metadata":{},"sourceType":"module"}